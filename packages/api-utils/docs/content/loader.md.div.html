
<div id="loader_module_api_docs" class="module_api_docs">

<h1>loader</h1>
<div class="module_description">

<!-- contributed by Irakli Gozalishvili [gozala@mozilla.com] -->

<h2>Loader</h2>
<p>Loader is base trait and it provides set of core properties and associated
validations. Trait is useful for all the compositions providing high level
APIs for creating JavaScript contexts that can access web content.</p>
<p>Loader is composed from the [EventEmitter] trait, therefore instances
of Loader and their descendants expose all the public properties
exposed by EventEmitter along with additional public properties:</p>
<p>Value changes on all of the above mentioned properties emit <code>propertyChange</code>
events on an instances.</p>
<p><strong>Example:</strong></p>
<p>The following code creates a wrapper on hidden frame that reloads a web page
in frame every time <code>contentURL</code> property is changed:</p>
<pre><code>const hiddenFrames = require("hidden-frame");
const { Loader } = require("content");
const PageLoader = Loader.compose({
  constructor: function PageLoader(options) {
    options = options || {};
    if (options.contentURL)
      this.contentURL = options.contentURL;
    this.on('propertyChange', this._onChange = this._onChange.bind(this));
    let self = this;
    hiddenFrames.add(hiddenFrames.HiddenFrame({
      onReady: function onReady() {
        let frame = self._frame = this.element;
        self._emit('propertyChange', { contentURL: self.contentURL });
      }
    }));
  },
  _onChange: function _onChange(e) {
    if ('contentURL' in e)
      this._frame.setAttribute('src', this._contentURL);
  }
});
</code></pre>
</div>


<div class="api_reference">


<h2 class="api_header">

API Reference
</h2>


<div class="api_component_group">


<h3 class="api_header">

Classes
</h3>


<div class="api_component">


<h4 class="api_name">

Loader
</h4>


<div class="api_component_group">


<div class="api_header">

Properties
</div>


<div class="api_component">


<div class="api_name">

contentScriptFile : 
<span class="datatype">array</span>


</div>

<p>The local file URLs of content scripts to load.  Content scripts specified by
this property are loaded <em>before</em> those specified by the <code>contentScript</code>
property.</p>
</div>


<div class="api_component">


<div class="api_name">

contentScript : 
<span class="datatype">array</span>


</div>

<p>The texts of content scripts to load.  Content scripts specified by this
property are loaded <em>after</em> those specified by the <code>contentScriptFile</code> property.</p>
</div>


<div class="api_component">


<div class="api_name">

contentScriptWhen : 
<span class="datatype">string</span>


</div>

<p>When to load the content scripts.
Possible values are "start" (default), which loads them as soon as
the window object for the page has been created, and "ready", which loads
them once the DOM content of the page has been loaded.</p>
</div>


<div class="api_component">


<div class="api_name">

contentURL : 
<span class="datatype">string</span>


</div>

<p>The URL of the content loaded.</p>
</div>


<div class="api_component">


<div class="api_name">

allow : 
<span class="datatype">object</span>


</div>

<p>Permissions for the content, with the following keys:</p>
</div>


</div>


</div>


</div>


</div>


</div>

