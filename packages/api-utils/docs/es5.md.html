
<!DOCTYPE html>

<html>

<head>

  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />

  <base target="_blank"/>

  <link rel="stylesheet" type="text/css" media="all"

        href="../../../css/base.css" />

  <link rel="stylesheet" type="text/css" media="all"

        href="../../../css/apidocs.css" />

  <title>Add-on SDK Documentation</title>

  <style type="text/css">

    body {

      border: 50px solid #FFFFFF;

    }

  </style>



  <script type="text/javascript">

    function rewrite_links() {

      var images = document.getElementsByTagName("img");

      for (var i = 0; i < images.length; i++) {

        var before = images[i].src.split("packages/")[0];

        var after = images[i].src.split("/docs")[1];

        images[i].src = before + after;

      }

    }

    </script>

</head>



<body onload = "rewrite_links()">

<div id="es5_module_api_docs" class="module_api_docs">
  
  <h1>es5</h1>
  <div class="module_description">
    
    <p>The <code>es5</code> module provides shim layer to a versions of firefox not yet
    implementing EcmaScript 5 features.</p>
    <ul>
    <li>New API's are described in the official [ES5 specification].</li>
    <li>John Resig made post with good [introduction] of new API's.</li>
    <li>Google tech talk [changes to JavaScript] is also a good walk through.</li>
    </ul>
    <p><strong>There is no need to <code>require</code> this module</strong> since it gets preloaded into
    all sandboxes automatically.</p>
    <p>Usage of new ES5 API's is encouraged, but since not everything can be
    provided to all the versions of firefox, there are few things to be aware of:</p>
    <ul>
    <li>
    <p><code>Object.freeze</code>, <code>Object.seal</code>, <code>Object.preventExtensions</code> does not really
    prevents any mutations. One thing it guarantees though, <code>Object.isFrozen</code>,
    <code>Object.isSealed</code>, <code>Object.isExtensible</code> checks will behave as defined in
    specification.</p>
    </li>
    <li>
    <p><code>Object.defineProperty</code> is only partially compliant with specification:</p>
    <ul>
    <li>Non configurable properties will be created as configurable ones.</li>
    <li>Instead of non-writable properties getters and setters will be defined,
        but <code>Object.getOwnPropertyDescriptor</code> will still behave as expected
        (will return property descriptor for non-writable property not a getter)</li>
    <li>
    <p>Defining properties using ES5 functions will break your [custom iterators]
         if you have any. Think twice before employing custom iterator cause in
         majority of cases you can just make properties non enumerable. In case
         you really need to have custom iterator be smart about it, make sure to
         add it after running ES5 functions and don't ignore previous iterators.
         Please see example below for inspiration:</p>
    <pre><code> let object = Object.create({}, {
       myField: { value: 6 }
     });
     object.__iterator__ = (function(original) {
       return function myIterator() {
         this.__iterator__ = original;
         for (let key in this) {
           // your logic here
         }
         this.__iterator__ = myIterator;
       }
     })(object.__iterator__);
    </code></pre>
    </li>
    </ul>
    </li>
    </ul>
  </div>
  
  
</div>


</body>



</html>
